{"version":3,"sources":["components/Navbar.js","components/Story.js","constants/Constants.js","services/Stories.service.js","components/Pagination.js","components/Stories.js","services/Comments.service.js","components/Comment.js","components/Comments.js","App.js","index.js"],"names":["Navbar","pathname","useLocation","useState","isOPen","setIsOPen","className","to","onClick","type","data-toggle","id","Story","story","window","open","url","title","score","by","kids","length","CONSTANTS","stories","firstIndex","lastIndex","a","slice","map","mapToJson","paginatedStories","Promise","all","console","log","fetch","then","response","json","catch","err","Pagination","setDisplayedStories","numberOfCurrentPage","setNumberOfCurrentPage","numberOfPages","Math","ceil","useEffect","getStories","data","currentPage","prevPage","nextPage","Stories","setStories","isLoading","setIsLoading","pathName","useHistory","location","displayedStories","replace","pageTitle","role","key","storyID","error","Comment","commentID","show","setShow","comment","setComment","nestedComments","index","aria-labelledby","data-parent","dangerouslySetInnerHTML","__html","text","Comments","useParams","comments","setComments","App","exact","path","component","from","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.55acfd51.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, NavLink, useLocation } from 'react-router-dom'\r\n\r\nfunction Navbar() {\r\n\r\n  const { pathname } = useLocation();\r\n  const [isOPen, setIsOPen] = useState(false);\r\n\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg fixed-top navbar-dark bg-dark\">\r\n      <Link to=\"/\" className=\"navbar-brand mr-auto mr-lg-0 mr-lg-5\">Hacker News</Link>\r\n      <button onClick={() => setIsOPen(!isOPen)} className=\"navbar-toggler p-0 border-0\" type=\"button\" data-toggle=\"offcanvas\">\r\n        <span className=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div className={`navbar-collapse offcanvas-collapse ${ isOPen ? \" \": \"hide-dd\"}`} id=\"navbarsExampleDefault\">\r\n        <ul className=\"navbar-nav mr-auto\">\r\n          <li className={`nav-item ${ pathname === '/' && \"active\" }`}>\r\n            <NavLink to=\"/topstories\" className=\"nav-link\">Top Stories</NavLink>\r\n          </li>\r\n          <li className=\"nav-item\">\r\n            <NavLink to=\"/newstories\" className=\"nav-link\">New Stories</NavLink>\r\n          </li>\r\n          <li className=\"nav-item\">\r\n            <NavLink to=\"/beststories\" className=\"nav-link\">Best Stories</NavLink>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction Story({ story }) {\r\n  return (\r\n    <div className=\"media text-muted pt-3\">\r\n      <p className=\"media-body pb-3 mb-0 small lh-125 border-bottom border-gray\">\r\n        <Link to=\"#\" onClick={()=> window.open(story.url, \"_blank\")}\r\n              className=\"text-dark d-block text-decoration-none font-weight-bold\">\r\n          { story.title }\r\n        </Link>\r\n        { story.score } points by { story.by } |\r\n        <Link to={`/comments/${ story.id }`}> { story.kids ? story.kids.length : 0 } comments</Link>\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Story;\r\n","\r\nexport const CONSTANTS = {\r\n  BASE_URL: \"https://hacker-news.firebaseio.com/v0/\",\r\n  ARROW_DOWN: \"arrow-down\",\r\n  TOPSTORIES: \"/topstories\",\r\n  TOP_STORIES: \"Top Stories\",\r\n  LOADING_COMMENTS: \"Loading all comments, it can take time a while...\"\r\n};\r\n","\r\nimport { CONSTANTS } from '../constants/Constants'\r\n\r\nexport async function getStories(stories, firstIndex, lastIndex){\r\n\r\n  try {\r\n    const paginatedStories = await stories\r\n      .slice(firstIndex, lastIndex)\r\n      .map(id => {\r\n        return mapToJson(id)\r\n      });\r\n\r\n    return await Promise.all(paginatedStories);\r\n  } catch (err) {\r\n    console.log(\"Error:\", err)\r\n  }\r\n}\r\n\r\nfunction mapToJson(id) {\r\n  return fetch(CONSTANTS.BASE_URL + `item/${id}.json`)\r\n    .then(response => response.json())\r\n    .catch((err) => {\r\n      console.log(\"Error:\", err)\r\n    })\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { getStories } from \"../services/Stories.service\";\r\n\r\nfunction Pagination({ stories, setDisplayedStories }) {\r\n\r\n  const [ numberOfCurrentPage, setNumberOfCurrentPage ] = useState(1);\r\n  const storiesPerPage = 10;\r\n  const numberOfPages = Math.ceil(stories.length/storiesPerPage)\r\n  const lastIndex = storiesPerPage * numberOfCurrentPage;\r\n  const firstIndex = lastIndex - storiesPerPage;\r\n\r\n  useEffect(()=>{\r\n    getStories(stories, firstIndex, lastIndex)\r\n      .then(data => {\r\n        setDisplayedStories(data)\r\n      })\r\n  }, [setDisplayedStories ,stories, firstIndex, lastIndex]);\r\n\r\n  const nextPage = (currentPage) => {\r\n    const nextPage = currentPage + 1;\r\n    nextPage < numberOfPages && setNumberOfCurrentPage(nextPage)\r\n  };\r\n\r\n  const prevPage = (currentPage) => {\r\n    const prevPage = currentPage - 1;\r\n    prevPage >= 1 && setNumberOfCurrentPage(prevPage)\r\n  };\r\n\r\n  return (\r\n    <ul className=\"pagination pt-3\">\r\n      <li className=\"page-item\">\r\n        <Link to=\"#\" onClick={ () => prevPage(numberOfCurrentPage) } className=\"page-link\">Prev</Link>\r\n      </li>\r\n      <li className=\"page-item\">\r\n        <Link to=\"#\" onClick={ () => nextPage(numberOfCurrentPage) } className=\"page-link\">Next</Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default Pagination;\r\n","import React, {useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport Story from './Story'\r\nimport Pagination from './Pagination'\r\nimport { CONSTANTS } from '../constants/Constants'\r\n\r\nfunction Stories() {\r\n\r\n  const [stories, setStories] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const { location } = useHistory();\r\n  const pathName = location.pathname;\r\n\r\n  const [ displayedStories, setDisplayedStories ] = useState([]);\r\n\r\n  useEffect(()=>{\r\n\r\n    fetch(`${ CONSTANTS.BASE_URL }${ pathName === \"/\" ? CONSTANTS.TOPSTORIES : pathName }.json`)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setStories(data);\r\n        setIsLoading(true)\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"Error:\", err)\r\n      })\r\n  }, [pathName]);\r\n\r\n  const [pageTitle] = useState(() => {\r\n    return pathName === \"/\" ?\r\n      CONSTANTS.TOP_STORIES :\r\n      pathName.slice(1).replace(/sto/g, \" sto\")\r\n  });\r\n\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <div className=\"my-3 p-3 bg-white rounded shadow-sm\">\r\n        <h6 className=\"border-bottom border-gray pb-2 mb-0 text-capitalize\">{ pageTitle }</h6>\r\n        { displayedStories.map(story => {\r\n            return <Story story={ story } key={ story.id } />\r\n          })\r\n        }\r\n        { isLoading &&\r\n          <Pagination stories={ stories } setDisplayedStories={ setDisplayedStories }/>\r\n        }\r\n      </div>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Stories;\r\n","import { CONSTANTS } from '../constants/Constants'\n\nexport function mapToJson(storyID){\n  return fetch(`${ CONSTANTS.BASE_URL }item/${storyID}.json`)\n    .then(response => response.json())\n    .catch(error => {\n      console.error('Error:', error);\n    });\n}\n","import React, {useEffect, useState} from 'react';\r\n\r\nimport { CONSTANTS } from '../constants/Constants'\r\nimport { mapToJson } from \"../services/Comments.service\";\r\n\r\nfunction Comment({ commentID }) {\r\n\r\n  const [show, setShow] = useState(\"show\");\r\n  const toggleShow = () => show ? setShow(\"\") : setShow(\"show\");\r\n\r\n  const [comment, setComment] = useState();\r\n\r\n  useEffect(()=>{\r\n    mapToJson(commentID).then((data)=>{\r\n      setComment(data)\r\n    })\r\n  },[commentID]);\r\n\r\n  const nestedComments = ((comment && comment.kids) || []).map((id, index) => {\r\n    return <Comment  commentID={ id } key={ index }/>\r\n  });\r\n\r\n  const createMarkup = () => {\r\n    return {__html: comment?.text}\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-header d-flex justify-content-between\" id=\"headingOne\">\r\n        { comment?.by }\r\n        <span onClick={ toggleShow } className={ `arrow ${ show ? \"\" : CONSTANTS.ARROW_DOWN}`}>\r\n        </span>\r\n      </div>\r\n      <div id=\"collapseOne\" className={`collapse ${show}`} aria-labelledby=\"headingOne\" data-parent=\"#accordion\">\r\n        <div className=\"card-body\" id=\"child1\">\r\n          <div dangerouslySetInnerHTML={createMarkup()} className=\"\"></div>\r\n          { nestedComments }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Comment;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom'\r\n\r\nimport Comment from './Comment'\r\nimport { mapToJson } from '../services/Comments.service'\r\nimport { CONSTANTS } from '../constants/Constants'\r\n\r\nfunction Comments() {\r\n\r\n  const { id } = useParams();\r\n  const [comments, setComments] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    mapToJson(id).then(\r\n      data => {\r\n        setComments(data.kids)\r\n        setIsLoading(false);\r\n      }\r\n    )\r\n  },[id]);\r\n\r\n  console.log(comments)\r\n  return (\r\n    <div className=\"container\">\r\n      <h6 className=\"pl-3 pt-3 mt-3 pb-2 mb-0\">Comments</h6>\r\n    {\r\n      isLoading ?\r\n      <div className=\"text-center pt-5 mt-5\">\r\n        { CONSTANTS.LOADING_COMMENTS }</div> :\r\n      comments.map( (id, index) => {\r\n        return <Comment commentID={ id } key={ index }/>\r\n      })\r\n    }\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default Comments;\r\n","import React from 'react';\nimport { HashRouter as Router, Switch, Route, Redirect } from 'react-router-dom'\n\nimport Navbar from \"./components/Navbar\";\nimport Stories from \"./components/Stories\"\nimport Comments from \"./components/Comments\"\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"app\">\n        <Navbar />\n        <Switch>\n          <Route exact key =\"/\" path=\"/\" component={Stories} />\n          <Route key =\"topstories\" path=\"/topstories\" component={Stories} />\n          <Route key =\"newstories\" path=\"/newstories\" component={Stories} />\n          <Route key =\"beststories\" path=\"/beststories\" component={Stories} />\n          <Route path=\"/comments/:id\" component={Comments} />\n          <Redirect from=\"*\" to=\"/\" />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.querySelector('#root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}